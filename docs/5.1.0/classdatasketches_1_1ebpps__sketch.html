<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>datasketches-cpp: ebpps_sketch&lt; T, A &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">datasketches-cpp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacedatasketches.html">datasketches</a></li><li class="navelem"><a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classdatasketches_1_1ebpps__sketch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ebpps_sketch&lt; T, A &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An implementation of an Exact and Bounded Sampling Proportional to Size sketch.  
 <a href="classdatasketches_1_1ebpps__sketch.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ebpps__sketch_8hpp_source.html">ebpps_sketch.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a15f1a34587bbc0a93cf97dfc2cc6c205"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a15f1a34587bbc0a93cf97dfc2cc6c205">ebpps_sketch</a> (uint32_t k, const A &amp;allocator=A())</td></tr>
<tr class="memdesc:a15f1a34587bbc0a93cf97dfc2cc6c205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classdatasketches_1_1ebpps__sketch.html#a15f1a34587bbc0a93cf97dfc2cc6c205">More...</a><br /></td></tr>
<tr class="separator:a15f1a34587bbc0a93cf97dfc2cc6c205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1125ed18baf3f257b5796321c7ec0f8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a1125ed18baf3f257b5796321c7ec0f8f">update</a> (const T &amp;item, double weight=1.0)</td></tr>
<tr class="memdesc:a1125ed18baf3f257b5796321c7ec0f8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates this sketch with the given data item with the given weight.  <a href="classdatasketches_1_1ebpps__sketch.html#a1125ed18baf3f257b5796321c7ec0f8f">More...</a><br /></td></tr>
<tr class="separator:a1125ed18baf3f257b5796321c7ec0f8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c07446b1fd8f8509f754ebaf3f77050"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a9c07446b1fd8f8509f754ebaf3f77050">update</a> (T &amp;&amp;item, double weight=1.0)</td></tr>
<tr class="memdesc:a9c07446b1fd8f8509f754ebaf3f77050"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates this sketch with the given data item with the given weight.  <a href="classdatasketches_1_1ebpps__sketch.html#a9c07446b1fd8f8509f754ebaf3f77050">More...</a><br /></td></tr>
<tr class="separator:a9c07446b1fd8f8509f754ebaf3f77050"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e3042bdaf5a90eb65767f1a392125a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#aa3e3042bdaf5a90eb65767f1a392125a">merge</a> (const <a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a>&lt; T, A &gt; &amp;sketch)</td></tr>
<tr class="memdesc:aa3e3042bdaf5a90eb65767f1a392125a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges the provided sketch into the current one.  <a href="classdatasketches_1_1ebpps__sketch.html#aa3e3042bdaf5a90eb65767f1a392125a">More...</a><br /></td></tr>
<tr class="separator:aa3e3042bdaf5a90eb65767f1a392125a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae71318de5a2cfb29c0737bc96a56d2a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#ae71318de5a2cfb29c0737bc96a56d2a6">merge</a> (<a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a>&lt; T, A &gt; &amp;&amp;sketch)</td></tr>
<tr class="memdesc:ae71318de5a2cfb29c0737bc96a56d2a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges the provided sketch into the current one.  <a href="classdatasketches_1_1ebpps__sketch.html#ae71318de5a2cfb29c0737bc96a56d2a6">More...</a><br /></td></tr>
<tr class="separator:ae71318de5a2cfb29c0737bc96a56d2a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55091df8eaaa2a9dc834f1e1d5340e7"><td class="memItemLeft" align="right" valign="top"><a id="af55091df8eaaa2a9dc834f1e1d5340e7"></a>
result_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#af55091df8eaaa2a9dc834f1e1d5340e7">get_result</a> () const</td></tr>
<tr class="memdesc:af55091df8eaaa2a9dc834f1e1d5340e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a copy of the current sample, as a std::vector. <br /></td></tr>
<tr class="separator:af55091df8eaaa2a9dc834f1e1d5340e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af561f5cd76ff61773713c627bc53b0a2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#af561f5cd76ff61773713c627bc53b0a2">get_k</a> () const</td></tr>
<tr class="memdesc:af561f5cd76ff61773713c627bc53b0a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the configured maximum sample size.  <a href="classdatasketches_1_1ebpps__sketch.html#af561f5cd76ff61773713c627bc53b0a2">More...</a><br /></td></tr>
<tr class="separator:af561f5cd76ff61773713c627bc53b0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af857be9469a7565252626f27e1f9d74d"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#af857be9469a7565252626f27e1f9d74d">get_n</a> () const</td></tr>
<tr class="memdesc:af857be9469a7565252626f27e1f9d74d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of items processed by the sketch, regardless of item weight.  <a href="classdatasketches_1_1ebpps__sketch.html#af857be9469a7565252626f27e1f9d74d">More...</a><br /></td></tr>
<tr class="separator:af857be9469a7565252626f27e1f9d74d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7e54338adc46e68f7c53676bcecde8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a8c7e54338adc46e68f7c53676bcecde8">get_cumulative_weight</a> () const</td></tr>
<tr class="memdesc:a8c7e54338adc46e68f7c53676bcecde8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the cumulative weight of items processed by the sketch.  <a href="classdatasketches_1_1ebpps__sketch.html#a8c7e54338adc46e68f7c53676bcecde8">More...</a><br /></td></tr>
<tr class="separator:a8c7e54338adc46e68f7c53676bcecde8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9a95d52fa46cfa85b026802397b2154"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#ad9a95d52fa46cfa85b026802397b2154">get_c</a> () const</td></tr>
<tr class="memdesc:ad9a95d52fa46cfa85b026802397b2154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the expected number of samples returned upon a call to <a class="el" href="classdatasketches_1_1ebpps__sketch.html#af55091df8eaaa2a9dc834f1e1d5340e7" title="Returns a copy of the current sample, as a std::vector.">get_result()</a> or the creation of an iterator.  <a href="classdatasketches_1_1ebpps__sketch.html#ad9a95d52fa46cfa85b026802397b2154">More...</a><br /></td></tr>
<tr class="separator:ad9a95d52fa46cfa85b026802397b2154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2b7a58dc85678d08752945ff655362"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a5a2b7a58dc85678d08752945ff655362">is_empty</a> () const</td></tr>
<tr class="memdesc:a5a2b7a58dc85678d08752945ff655362"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the sketch is empty.  <a href="classdatasketches_1_1ebpps__sketch.html#a5a2b7a58dc85678d08752945ff655362">More...</a><br /></td></tr>
<tr class="separator:a5a2b7a58dc85678d08752945ff655362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d85cf47c4ecd0580ec623c42006dd1b"><td class="memItemLeft" align="right" valign="top">A&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a9d85cf47c4ecd0580ec623c42006dd1b">get_allocator</a> () const</td></tr>
<tr class="memdesc:a9d85cf47c4ecd0580ec623c42006dd1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an instance of the allocator for this sketch.  <a href="classdatasketches_1_1ebpps__sketch.html#a9d85cf47c4ecd0580ec623c42006dd1b">More...</a><br /></td></tr>
<tr class="separator:a9d85cf47c4ecd0580ec623c42006dd1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20897c5c8bd47f5d4005989bead0e55"><td class="memItemLeft" align="right" valign="top"><a id="ad20897c5c8bd47f5d4005989bead0e55"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a> ()</td></tr>
<tr class="memdesc:ad20897c5c8bd47f5d4005989bead0e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the sketch to its default, empty state. <br /></td></tr>
<tr class="separator:ad20897c5c8bd47f5d4005989bead0e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8762fed25b3024f07989976344dd0afb"><td class="memTemplParams" colspan="2">template&lt;typename SerDe  = serde&lt;T&gt;&gt; </td></tr>
<tr class="memitem:a8762fed25b3024f07989976344dd0afb"><td class="memTemplItemLeft" align="right" valign="top">size_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a8762fed25b3024f07989976344dd0afb">get_serialized_size_bytes</a> (const SerDe &amp;sd=SerDe()) const</td></tr>
<tr class="memdesc:a8762fed25b3024f07989976344dd0afb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes size needed to serialize the current state of the sketch.  <a href="classdatasketches_1_1ebpps__sketch.html#a8762fed25b3024f07989976344dd0afb">More...</a><br /></td></tr>
<tr class="separator:a8762fed25b3024f07989976344dd0afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d0c269c23926e93b1c7a9c00e86af97"><td class="memTemplParams" colspan="2">template&lt;typename SerDe  = serde&lt;T&gt;&gt; </td></tr>
<tr class="memitem:a1d0c269c23926e93b1c7a9c00e86af97"><td class="memTemplItemLeft" align="right" valign="top">vector_bytes&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a1d0c269c23926e93b1c7a9c00e86af97">serialize</a> (unsigned header_size_bytes=0, const SerDe &amp;sd=SerDe()) const</td></tr>
<tr class="memdesc:a1d0c269c23926e93b1c7a9c00e86af97"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method serializes the sketch as a vector of bytes.  <a href="classdatasketches_1_1ebpps__sketch.html#a1d0c269c23926e93b1c7a9c00e86af97">More...</a><br /></td></tr>
<tr class="separator:a1d0c269c23926e93b1c7a9c00e86af97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a538940c100e4353b3671ad452d3d3056"><td class="memTemplParams" colspan="2">template&lt;typename SerDe  = serde&lt;T&gt;&gt; </td></tr>
<tr class="memitem:a538940c100e4353b3671ad452d3d3056"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a538940c100e4353b3671ad452d3d3056">serialize</a> (std::ostream &amp;os, const SerDe &amp;sd=SerDe()) const</td></tr>
<tr class="memdesc:a538940c100e4353b3671ad452d3d3056"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method serializes the sketch into a given stream in a binary form.  <a href="classdatasketches_1_1ebpps__sketch.html#a538940c100e4353b3671ad452d3d3056">More...</a><br /></td></tr>
<tr class="separator:a538940c100e4353b3671ad452d3d3056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed372241c10ffd041bee85602edb199a"><td class="memItemLeft" align="right" valign="top">string&lt; A &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#aed372241c10ffd041bee85602edb199a">to_string</a> () const</td></tr>
<tr class="memdesc:aed372241c10ffd041bee85602edb199a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a summary of the sketch.  <a href="classdatasketches_1_1ebpps__sketch.html#aed372241c10ffd041bee85602edb199a">More...</a><br /></td></tr>
<tr class="separator:aed372241c10ffd041bee85602edb199a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa52dd153f1e3cac57d4742e2fef6fc"><td class="memItemLeft" align="right" valign="top">string&lt; A &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a0fa52dd153f1e3cac57d4742e2fef6fc">items_to_string</a> () const</td></tr>
<tr class="memdesc:a0fa52dd153f1e3cac57d4742e2fef6fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints the raw sketch items to a string.  <a href="classdatasketches_1_1ebpps__sketch.html#a0fa52dd153f1e3cac57d4742e2fef6fc">More...</a><br /></td></tr>
<tr class="separator:a0fa52dd153f1e3cac57d4742e2fef6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f1f04c52ad57d836463132e260dee2f"><td class="memItemLeft" align="right" valign="top">ebpps_sample&lt; T, A &gt;::const_iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a7f1f04c52ad57d836463132e260dee2f">begin</a> () const</td></tr>
<tr class="memdesc:a7f1f04c52ad57d836463132e260dee2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterator pointing to the first item in the sketch.  <a href="classdatasketches_1_1ebpps__sketch.html#a7f1f04c52ad57d836463132e260dee2f">More...</a><br /></td></tr>
<tr class="separator:a7f1f04c52ad57d836463132e260dee2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42825c759c3dec7ece362973012123a2"><td class="memItemLeft" align="right" valign="top">ebpps_sample&lt; T, A &gt;::const_iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#a42825c759c3dec7ece362973012123a2">end</a> () const</td></tr>
<tr class="memdesc:a42825c759c3dec7ece362973012123a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterator pointing to the past-the-end item in the sketch.  <a href="classdatasketches_1_1ebpps__sketch.html#a42825c759c3dec7ece362973012123a2">More...</a><br /></td></tr>
<tr class="separator:a42825c759c3dec7ece362973012123a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab70ba7338cb96e92d62399fbc1b774e6"><td class="memTemplParams" colspan="2">template&lt;typename SerDe  = serde&lt;T&gt;&gt; </td></tr>
<tr class="memitem:ab70ba7338cb96e92d62399fbc1b774e6"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#ab70ba7338cb96e92d62399fbc1b774e6">deserialize</a> (const void *bytes, size_t size, const SerDe &amp;sd=SerDe(), const A &amp;allocator=A())</td></tr>
<tr class="memdesc:ab70ba7338cb96e92d62399fbc1b774e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method deserializes a sketch from a given array of bytes.  <a href="classdatasketches_1_1ebpps__sketch.html#ab70ba7338cb96e92d62399fbc1b774e6">More...</a><br /></td></tr>
<tr class="separator:ab70ba7338cb96e92d62399fbc1b774e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2a7bf12915615ea1d15ccfdcc525d2"><td class="memTemplParams" colspan="2">template&lt;typename SerDe  = serde&lt;T&gt;&gt; </td></tr>
<tr class="memitem:ada2a7bf12915615ea1d15ccfdcc525d2"><td class="memTemplItemLeft" align="right" valign="top">static <a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classdatasketches_1_1ebpps__sketch.html#ada2a7bf12915615ea1d15ccfdcc525d2">deserialize</a> (std::istream &amp;is, const SerDe &amp;sd=SerDe(), const A &amp;allocator=A())</td></tr>
<tr class="memdesc:ada2a7bf12915615ea1d15ccfdcc525d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method deserializes a sketch from a given stream.  <a href="classdatasketches_1_1ebpps__sketch.html#ada2a7bf12915615ea1d15ccfdcc525d2">More...</a><br /></td></tr>
<tr class="separator:ada2a7bf12915615ea1d15ccfdcc525d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T, typename A = std::allocator&lt;T&gt;&gt;<br />
class datasketches::ebpps_sketch&lt; T, A &gt;</h3>

<p>An implementation of an Exact and Bounded Sampling Proportional to Size sketch. </p>
<p>From: "Exact PPS Sampling with Bounded Sample Size", B. Hentschel, P. J. Haas, Y. Tian. Information Processing Letters, 2023.</p>
<p>This sketch samples data from a stream of items proportional to the weight of each item. The sample guarantees the presence of an item in the result is proportional to that item's portion of the total weight seen by the sketch, and returns a sample no larger than size k.</p>
<p>The sample may be smaller than k and the resulting size of the sample potentially includes a probabilistic component, meaning the resulting sample size is not always constant.</p>
<dl class="section author"><dt>Author</dt><dd>Jon Malkin </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a15f1a34587bbc0a93cf97dfc2cc6c205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15f1a34587bbc0a93cf97dfc2cc6c205">&#9670;&nbsp;</a></span>ebpps_sketch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const A &amp;&#160;</td>
          <td class="paramname"><em>allocator</em> = <code>A()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>sketch size </td></tr>
    <tr><td class="paramname">allocator</td><td>instance of an allocator </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1125ed18baf3f257b5796321c7ec0f8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1125ed18baf3f257b5796321c7ec0f8f">&#9670;&nbsp;</a></span>update() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update </td>
          <td>(</td>
          <td class="paramtype">const T &amp;&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>weight</em> = <code>1.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates this sketch with the given data item with the given weight. </p>
<p>This method takes an lvalue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>an item from a stream of items </td></tr>
    <tr><td class="paramname">weight</td><td>the weight of the item </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c07446b1fd8f8509f754ebaf3f77050"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c07446b1fd8f8509f754ebaf3f77050">&#9670;&nbsp;</a></span>update() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update </td>
          <td>(</td>
          <td class="paramtype">T &amp;&amp;&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>weight</em> = <code>1.0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates this sketch with the given data item with the given weight. </p>
<p>This method takes an rvalue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>an item from a stream of items </td></tr>
    <tr><td class="paramname">weight</td><td>the weight of the item </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa3e3042bdaf5a90eb65767f1a392125a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e3042bdaf5a90eb65767f1a392125a">&#9670;&nbsp;</a></span>merge() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void merge </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a>&lt; T, A &gt; &amp;&#160;</td>
          <td class="paramname"><em>sketch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges the provided sketch into the current one. </p>
<p>This method takes an lvalue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sketch</td><td>the sketch to merge into the current object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae71318de5a2cfb29c0737bc96a56d2a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae71318de5a2cfb29c0737bc96a56d2a6">&#9670;&nbsp;</a></span>merge() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void merge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a>&lt; T, A &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>sketch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges the provided sketch into the current one. </p>
<p>This method takes an rvalue. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sketch</td><td>the sketch to merge into the current object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af561f5cd76ff61773713c627bc53b0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af561f5cd76ff61773713c627bc53b0a2">&#9670;&nbsp;</a></span>get_k()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t get_k</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the configured maximum sample size. </p>
<dl class="section return"><dt>Returns</dt><dd>configured maximum sample size </dd></dl>

</div>
</div>
<a id="af857be9469a7565252626f27e1f9d74d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af857be9469a7565252626f27e1f9d74d">&#9670;&nbsp;</a></span>get_n()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_n</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the number of items processed by the sketch, regardless of item weight. </p>
<dl class="section return"><dt>Returns</dt><dd>count of items processed by the sketch </dd></dl>

</div>
</div>
<a id="a8c7e54338adc46e68f7c53676bcecde8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7e54338adc46e68f7c53676bcecde8">&#9670;&nbsp;</a></span>get_cumulative_weight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double get_cumulative_weight</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the cumulative weight of items processed by the sketch. </p>
<dl class="section return"><dt>Returns</dt><dd>cumulative weight of items seen </dd></dl>

</div>
</div>
<a id="ad9a95d52fa46cfa85b026802397b2154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9a95d52fa46cfa85b026802397b2154">&#9670;&nbsp;</a></span>get_c()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double get_c</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the expected number of samples returned upon a call to <a class="el" href="classdatasketches_1_1ebpps__sketch.html#af55091df8eaaa2a9dc834f1e1d5340e7" title="Returns a copy of the current sample, as a std::vector.">get_result()</a> or the creation of an iterator. </p>
<p>The number is a floating point value, where the fractional portion represents the probability of including a "partial item" from the sample.</p>
<p>The value C should be no larger than the sketch's configured value of k, although numerical precision limitations mean it may exceed k by double precision floating point error margins in certain cases. </p><dl class="section return"><dt>Returns</dt><dd>The expected number of samples returned when querying the sketch </dd></dl>

</div>
</div>
<a id="a5a2b7a58dc85678d08752945ff655362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a2b7a58dc85678d08752945ff655362">&#9670;&nbsp;</a></span>is_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool is_empty</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the sketch is empty. </p>
<dl class="section return"><dt>Returns</dt><dd>empty flag </dd></dl>

</div>
</div>
<a id="a9d85cf47c4ecd0580ec623c42006dd1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d85cf47c4ecd0580ec623c42006dd1b">&#9670;&nbsp;</a></span>get_allocator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">A get_allocator</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an instance of the allocator for this sketch. </p>
<dl class="section return"><dt>Returns</dt><dd>allocator </dd></dl>

</div>
</div>
<a id="a8762fed25b3024f07989976344dd0afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8762fed25b3024f07989976344dd0afb">&#9670;&nbsp;</a></span>get_serialized_size_bytes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t get_serialized_size_bytes </td>
          <td>(</td>
          <td class="paramtype">const SerDe &amp;&#160;</td>
          <td class="paramname"><em>sd</em> = <code>SerDe()</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes size needed to serialize the current state of the sketch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sd</td><td>instance of a SerDe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size in bytes needed to serialize this sketch </dd></dl>

</div>
</div>
<a id="a1d0c269c23926e93b1c7a9c00e86af97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d0c269c23926e93b1c7a9c00e86af97">&#9670;&nbsp;</a></span>serialize() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector_bytes serialize </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>header_size_bytes</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SerDe &amp;&#160;</td>
          <td class="paramname"><em>sd</em> = <code>SerDe()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method serializes the sketch as a vector of bytes. </p>
<p>An optional header can be reserved in front of the sketch. It is a blank space of a given size. This header is used in Datasketches PostgreSQL extension. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">header_size_bytes</td><td>space to reserve in front of the sketch </td></tr>
    <tr><td class="paramname">sd</td><td>instance of a SerDe </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a538940c100e4353b3671ad452d3d3056"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a538940c100e4353b3671ad452d3d3056">&#9670;&nbsp;</a></span>serialize() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SerDe &amp;&#160;</td>
          <td class="paramname"><em>sd</em> = <code>SerDe()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method serializes the sketch into a given stream in a binary form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">os</td><td>output stream </td></tr>
    <tr><td class="paramname">sd</td><td>instance of a SerDe </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab70ba7338cb96e92d62399fbc1b774e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab70ba7338cb96e92d62399fbc1b774e6">&#9670;&nbsp;</a></span>deserialize() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a> deserialize </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SerDe &amp;&#160;</td>
          <td class="paramname"><em>sd</em> = <code>SerDe()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const A &amp;&#160;</td>
          <td class="paramname"><em>allocator</em> = <code>A()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method deserializes a sketch from a given array of bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>pointer to the array of bytes </td></tr>
    <tr><td class="paramname">size</td><td>the size of the array </td></tr>
    <tr><td class="paramname">sd</td><td>instance of a SerDe </td></tr>
    <tr><td class="paramname">allocator</td><td>instance of an allocator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an instance of a sketch </dd></dl>

</div>
</div>
<a id="ada2a7bf12915615ea1d15ccfdcc525d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada2a7bf12915615ea1d15ccfdcc525d2">&#9670;&nbsp;</a></span>deserialize() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classdatasketches_1_1ebpps__sketch.html">ebpps_sketch</a> deserialize </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>is</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SerDe &amp;&#160;</td>
          <td class="paramname"><em>sd</em> = <code>SerDe()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const A &amp;&#160;</td>
          <td class="paramname"><em>allocator</em> = <code>A()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method deserializes a sketch from a given stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is</td><td>input stream </td></tr>
    <tr><td class="paramname">sd</td><td>instance of a SerDe </td></tr>
    <tr><td class="paramname">allocator</td><td>instance of an allocator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an instance of a sketch </dd></dl>

</div>
</div>
<a id="aed372241c10ffd041bee85602edb199a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed372241c10ffd041bee85602edb199a">&#9670;&nbsp;</a></span>to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string&lt; A &gt; to_string</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints a summary of the sketch. </p>
<dl class="section return"><dt>Returns</dt><dd>the summary as a string </dd></dl>

</div>
</div>
<a id="a0fa52dd153f1e3cac57d4742e2fef6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fa52dd153f1e3cac57d4742e2fef6fc">&#9670;&nbsp;</a></span>items_to_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string&lt; A &gt; items_to_string</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints the raw sketch items to a string. </p>
<p>Only works for type T with a defined std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const T&amp;) and is kept separate from <a class="el" href="classdatasketches_1_1ebpps__sketch.html#aed372241c10ffd041bee85602edb199a" title="Prints a summary of the sketch.">to_string()</a> to allow compilation even if T does not have such an operator defined. </p><dl class="section return"><dt>Returns</dt><dd>a string with the sketch items </dd></dl>

</div>
</div>
<a id="a7f1f04c52ad57d836463132e260dee2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f1f04c52ad57d836463132e260dee2f">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ebpps_sample&lt; T, A &gt;::const_iterator begin</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterator pointing to the first item in the sketch. </p>
<p>If the sketch is empty, the returned iterator must not be dereferenced or incremented. </p><dl class="section return"><dt>Returns</dt><dd>iterator pointing to the first item in the sketch </dd></dl>

</div>
</div>
<a id="a42825c759c3dec7ece362973012123a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42825c759c3dec7ece362973012123a2">&#9670;&nbsp;</a></span>end()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ebpps_sample&lt; T, A &gt;::const_iterator end</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterator pointing to the past-the-end item in the sketch. </p>
<p>The past-the-end item is the hypothetical item that would follow the last item. It does not point to any item, and must not be dereferenced or incremented. </p><dl class="section return"><dt>Returns</dt><dd>iterator pointing to the past-the-end item in the sketch </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sampling/include/<a class="el" href="ebpps__sketch_8hpp_source.html">ebpps_sketch.hpp</a></li>
<li>sampling/include/<a class="el" href="ebpps__sketch__impl_8hpp_source.html">ebpps_sketch_impl.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
